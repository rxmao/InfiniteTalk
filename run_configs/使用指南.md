# ğŸš€ InfiniteTalk é€Ÿåº¦ä¼˜åŒ–å®Œæ•´ä½¿ç”¨æŒ‡å—

## ğŸ“ æ–‡ä»¶æ¸…å•

å·²ä¸ºä½ åˆ›å»ºä»¥ä¸‹ä¼˜åŒ–é…ç½®æ–‡ä»¶ï¼š

```
InfiniteTalk/
â”œâ”€â”€ run_fast_equivalent.sh          # æ ¹ç›®å½•å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”‚
â””â”€â”€ run_configs/                     # é…ç½®æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ 01_ultra_fast.sh            # æé€Ÿæ¨¡å¼ (1åˆ†é’Ÿ)
    â”œâ”€â”€ 02_comfyui_equivalent.sh    # ComfyUIç­‰æ•ˆ (1-2åˆ†é’Ÿ) â­
    â”œâ”€â”€ 03_balanced.sh              # å¹³è¡¡æ¨¡å¼ (3-4åˆ†é’Ÿ)
    â”œâ”€â”€ 04_high_quality.sh          # é«˜è´¨é‡ (8-10åˆ†é’Ÿ)
    â”œâ”€â”€ 05_low_vram.sh              # ä½æ˜¾å­˜ (2-3åˆ†é’Ÿ)
    â”œâ”€â”€ 06_720p_high_res.sh         # 720Pé«˜æ¸… (3-5åˆ†é’Ÿ)
    â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨.sh                  # äº¤äº’å¼èœå•
    â”œâ”€â”€ README_é…ç½®å¯¹æ¯”.md           # è¯¦ç»†å¯¹æ¯”æ–‡æ¡£
    â”œâ”€â”€ å‚æ•°æ˜ å°„å¯¹ç…§è¡¨.md            # ComfyUIâ†”Pythonæ˜ å°„
    â””â”€â”€ ä½¿ç”¨æŒ‡å—.md                  # æœ¬æ–‡æ¡£
```

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹ (3æ­¥)

### æ–¹æ³• 1: äº¤äº’å¼èœå• (æ¨èæ–°æ‰‹)

```bash
cd /home/user/InfiniteTalk/run_configs
bash å¿«é€Ÿå¯åŠ¨.sh
```

ç„¶åè¾“å…¥æ•°å­—é€‰æ‹©é…ç½®å³å¯ï¼

---

### æ–¹æ³• 2: ç›´æ¥è¿è¡Œ (æ¨èç†Ÿç»ƒç”¨æˆ·)

```bash
cd /home/user/InfiniteTalk

# è¿è¡Œ ComfyUI ç­‰æ•ˆé…ç½® (æ¨è!)
bash run_configs/02_comfyui_equivalent.sh

# æˆ–è€…è¿è¡Œæé€Ÿæ¨¡å¼
bash run_configs/01_ultra_fast.sh
```

---

### æ–¹æ³• 3: ä¿®æ”¹åè¿è¡Œ (æ¨èé«˜çº§ç”¨æˆ·)

```bash
# 1. å¤åˆ¶é…ç½®æ–‡ä»¶
cp run_configs/02_comfyui_equivalent.sh my_custom_config.sh

# 2. ç¼–è¾‘å‚æ•°
nano my_custom_config.sh

# 3. è¿è¡Œ
bash my_custom_config.sh
```

---

## ğŸ“Š é…ç½®é€‰æ‹©æŒ‡å—

### ğŸ¤” æˆ‘åº”è¯¥é€‰æ‹©å“ªä¸ªé…ç½®?

#### åœºæ™¯ 1: ç¬¬ä¸€æ¬¡ä½¿ç”¨ â†’ `02_comfyui_equivalent.sh`
**åŸå› :** ä¸å·¥ä½œæµå®Œå…¨ä¸€è‡´ï¼ŒéªŒè¯ç¯å¢ƒé…ç½®

#### åœºæ™¯ 2: å¿«é€Ÿæµ‹è¯•æ•ˆæœ â†’ `01_ultra_fast.sh`
**åŸå› :** 1åˆ†é’Ÿå‡ºç»“æœï¼Œå¿«é€Ÿè¿­ä»£

#### åœºæ™¯ 3: æ—¥å¸¸ç”Ÿäº§ â†’ `03_balanced.sh`
**åŸå› :** é€Ÿåº¦ä¸è´¨é‡æœ€ä½³å¹³è¡¡

#### åœºæ™¯ 4: å®¢æˆ·äº¤ä»˜ â†’ `04_high_quality.sh`
**åŸå› :** æœ€é«˜è´¨é‡ï¼Œç»†èŠ‚ä¸°å¯Œ

#### åœºæ™¯ 5: æ˜¾å¡åªæœ‰ 12GB â†’ `05_low_vram.sh`
**åŸå› :** æè‡´æ˜¾å­˜ä¼˜åŒ–

#### åœºæ™¯ 6: éœ€è¦é«˜åˆ†è¾¨ç‡ â†’ `06_720p_high_res.sh`
**åŸå› :** 720P è¾“å‡º

---

## âš¡ é€Ÿåº¦å¯¹æ¯” (22ç§’è§†é¢‘)

| é…ç½® | è€—æ—¶ | vs åŸå§‹ | vs ComfyUI |
|------|------|---------|-----------|
| **åŸå§‹å‘½ä»¤** (40æ­¥) | 10åˆ†é’Ÿ | 1x | 8x æ…¢ |
| **01_ultra_fast** | 1åˆ†é’Ÿ | 10x å¿« | æŒå¹³ |
| **02_comfyui_equivalent** â­ | 1-2åˆ†é’Ÿ | 8x å¿« | æŒå¹³ |
| **03_balanced** | 3-4åˆ†é’Ÿ | 3x å¿« | 2-3x æ…¢ |
| **04_high_quality** | 8-10åˆ†é’Ÿ | 1x | 6-8x æ…¢ |
| **05_low_vram** | 2-3åˆ†é’Ÿ | 4-5x å¿« | 1-2x æ…¢ |
| **06_720p** | 3-5åˆ†é’Ÿ | 2-3x å¿« | 2-4x æ…¢ |

---

## ğŸ”‘ æ ¸å¿ƒå‚æ•°è¯´æ˜

### ä¸ºä»€ä¹ˆ ComfyUI å·¥ä½œæµè¿™ä¹ˆå¿«?

**3 ä¸ªå…³é”®ä¼˜åŒ–:**

1. **4 æ­¥é‡‡æ ·** (vs 40 æ­¥) â†’ **10x åŠ é€Ÿ**
   ```bash
   --sample_steps 4
   ```

2. **lightx2v LoRA** â†’ ä¿æŒè´¨é‡
   ```bash
   --lora_dir weights/lightx2v_I2V_14B_480p_cfg_step_distill_rank128_bf16.safetensors
   --lora_scale 0.8
   ```

3. **FP8 é‡åŒ–** â†’ **1.5-2x åŠ é€Ÿ**
   ```bash
   --quant fp8
   --quant_dir weights/InfiniteTalk/quant_models/infinitetalk_single_fp8.safetensors
   ```

**æ€»åŠ é€Ÿæ¯”: 8-10x!**

---

## ğŸ“ ä¿®æ”¹é…ç½®æ•™ç¨‹

### ç¤ºä¾‹ 1: è°ƒæ•´ç”Ÿæˆè§†é¢‘é•¿åº¦

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° `--max_frame_num`:

```bash
--max_frame_num 1000    # é»˜è®¤ 40ç§’ (1000å¸§ @ 25fps)
--max_frame_num 2500    # æ”¹ä¸º 100ç§’
--max_frame_num 500     # æ”¹ä¸º 20ç§’
```

---

### ç¤ºä¾‹ 2: ä¿®æ”¹éšæœºç§å­

```bash
--base_seed 42      # é»˜è®¤ç§å­
--base_seed 12345   # æ”¹ä¸ºå›ºå®šç§å­
--base_seed -1      # æ”¹ä¸ºéšæœºç§å­
```

---

### ç¤ºä¾‹ 3: è°ƒæ•´å”‡å½¢åŒæ­¥ç²¾åº¦

```bash
# å¢å¼ºéŸ³é¢‘å¼•å¯¼ (æ›´ç²¾ç¡®çš„å”‡å½¢)
--sample_audio_guide_scale 3.0    # é»˜è®¤ 2.0ï¼Œæé«˜åˆ° 3.0
--sample_shift 12.0               # é»˜è®¤ 11.0ï¼Œæé«˜åˆ° 12.0
```

---

### ç¤ºä¾‹ 4: ä½¿ç”¨è‡ªå·±çš„è¾“å…¥

åˆ›å»ºæ–°çš„ JSON é…ç½®æ–‡ä»¶:

```json
{
    "prompt": "ä¸€ä¸ªå¥³ç”Ÿå¯¹ç€é•œå¤´å¾®ç¬‘è¯´è¯",
    "cond_video": "my_images/girl.png",
    "cond_audio": {
        "person1": "my_audio/speech.wav"
    }
}
```

ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶:

```bash
--input_json my_config.json
```

---

## ğŸ› ï¸ ç¯å¢ƒä¾èµ–æ£€æŸ¥

### è¿è¡Œå‰ç¡®è®¤:

```bash
# 1. æ£€æŸ¥ Python ç¯å¢ƒ
python --version  # åº”è¯¥æ˜¯ 3.10+

# 2. æ£€æŸ¥ PyTorch
python -c "import torch; print(torch.__version__)"  # åº”è¯¥æ˜¯ 2.4.1

# 3. æ£€æŸ¥ CUDA
nvidia-smi  # ç¡®è®¤æ˜¾å¡å¯ç”¨

# 4. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls -lh weights/Wan2.1-I2V-14B-480P/
ls -lh weights/InfiniteTalk/
ls -lh weights/chinese-wav2vec2-base/
```

---

### ä¸‹è½½ç¼ºå¤±çš„æ¨¡å‹

å¦‚æœ LoRA æ–‡ä»¶ä¸å­˜åœ¨:

```bash
# lightx2v LoRA
huggingface-cli download Kijai/WanVideo_comfy \
    Wan21_T2V_14B_lightx2v_cfg_step_distill_lora_rank32.safetensors \
    --local-dir weights/

# FusionX LoRA
huggingface-cli download vrgamedevgirl84/Wan14BT2VFusioniX \
    FusionX_LoRa/Wan2.1_I2V_14B_FusionX_LoRA.safetensors \
    --local-dir weights/

# é‡åŒ–æ¨¡å‹
huggingface-cli download MeiGen-AI/InfiniteTalk \
    quant_models/infinitetalk_single_fp8.safetensors \
    --local-dir weights/InfiniteTalk/
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ‰¾ä¸åˆ° LoRA æ–‡ä»¶

**é”™è¯¯ä¿¡æ¯:**
```
FileNotFoundError: weights/lightx2v_I2V_14B_480p_cfg_step_distill_rank128_bf16.safetensors
```

**è§£å†³æ–¹æ¡ˆ:**
```bash
# ä¸´æ—¶è§£å†³: æ³¨é‡Šæ‰ LoRA ç›¸å…³è¡Œ
# --lora_dir ...
# --lora_scale ...

# å¹¶ä¿®æ”¹é‡‡æ ·æ­¥æ•°
--sample_steps 40  # ä¸ç”¨ LoRA éœ€è¦æ›´å¤šæ­¥æ•°
```

---

### é—®é¢˜ 2: æ˜¾å­˜ä¸è¶³ (CUDA OOM)

**é”™è¯¯ä¿¡æ¯:**
```
torch.cuda.OutOfMemoryError: CUDA out of memory
```

**è§£å†³æ–¹æ¡ˆ A: ä½¿ç”¨ä½æ˜¾å­˜é…ç½®**
```bash
bash run_configs/05_low_vram.sh
```

**è§£å†³æ–¹æ¡ˆ B: æ‰‹åŠ¨ä¼˜åŒ–**
```bash
# æ·»åŠ ä»¥ä¸‹å‚æ•°åˆ°ä»»æ„é…ç½®
--num_persistent_param_in_dit 0
--t5_cpu true
--offload_model true
```

---

### é—®é¢˜ 3: ç”Ÿæˆé€Ÿåº¦æ…¢

**æ£€æŸ¥æ¸…å•:**

- [ ] æ˜¯å¦ä½¿ç”¨äº† 4 æ­¥é‡‡æ ·? â†’ æ£€æŸ¥ `--sample_steps 4`
- [ ] æ˜¯å¦åŠ è½½äº† LoRA? â†’ æ£€æŸ¥ `--lora_dir`
- [ ] æ˜¯å¦å¯ç”¨äº† fp8? â†’ æ£€æŸ¥ `--quant fp8`
- [ ] shift å‚æ•°æ˜¯å¦æ­£ç¡®? â†’ LoRA ç”¨ 11.0ï¼Œæ—  LoRA ç”¨ 7.0

**å¯¹æ¯”æµ‹è¯•:**
```bash
# è¿è¡Œæ ‡å‡†é…ç½®
bash run_configs/02_comfyui_equivalent.sh

# å¦‚æœè¿˜æ˜¯æ…¢ï¼Œæ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
nvidia-smi  # æ˜¾å¡å ç”¨
htop        # CPU/å†…å­˜å ç”¨
```

---

### é—®é¢˜ 4: è¾“å‡ºè´¨é‡å·®

**å¯èƒ½åŸå› :**

1. **æ­¥æ•°å¤ªå°‘**
   ```bash
   # å¢åŠ é‡‡æ ·æ­¥æ•°
   --sample_steps 8  # ä» 4 æå‡åˆ° 8
   ```

2. **LoRA å¼ºåº¦è¿‡é«˜**
   ```bash
   # é™ä½ LoRA å¼ºåº¦
   --lora_scale 0.6  # ä» 0.8 é™åˆ° 0.6
   ```

3. **éŸ³é¢‘å¼•å¯¼ä¸è¶³**
   ```bash
   # æé«˜éŸ³é¢‘å¼•å¯¼
   --sample_audio_guide_scale 3.0  # ä» 2.0 æé«˜åˆ° 3.0
   ```

---

## ğŸ“š æ·±å…¥å­¦ä¹ 

### é˜…è¯»é¡ºåºæ¨è:

1. **æœ¬æ–‡æ¡£** (ä½¿ç”¨æŒ‡å—.md) - å¿«é€Ÿä¸Šæ‰‹ âœ…
2. **README_é…ç½®å¯¹æ¯”.md** - ç†è§£å„é…ç½®å·®å¼‚
3. **å‚æ•°æ˜ å°„å¯¹ç…§è¡¨.md** - ComfyUI â†” Python æ˜ å°„
4. **å®˜æ–¹æ–‡æ¡£** - https://meigen-ai.github.io/InfiniteTalk/

---

### é«˜çº§ä¸»é¢˜:

- **å¤šäººå¯¹è¯é…ç½®** â†’ ä¿®æ”¹ input_jsonï¼Œæ·»åŠ  person2
- **åœºæ™¯åˆ†å‰²** â†’ æ·»åŠ  `--scene_seg`
- **å¤š GPU å¹¶è¡Œ** â†’ ä½¿ç”¨ `torchrun`
- **TeaCache åŠ é€Ÿ** â†’ æ·»åŠ  `--use_teacache`
- **APG ä¼˜åŒ–** â†’ æ·»åŠ  `--use_apg`

---

## ğŸ“ ç¤ºä¾‹å·¥ä½œæµ

### å®Œæ•´çš„ç”Ÿäº§æµç¨‹:

```bash
# æ­¥éª¤ 1: å‡†å¤‡è¾“å…¥æ–‡ä»¶
mkdir my_project
cp examples/single_example_image.json my_project/config.json
# ç¼–è¾‘ config.jsonï¼Œå¡«å…¥ä½ çš„å›¾ç‰‡å’ŒéŸ³é¢‘è·¯å¾„

# æ­¥éª¤ 2: å¿«é€Ÿæµ‹è¯• (1åˆ†é’Ÿ)
bash run_configs/01_ultra_fast.sh

# æ­¥éª¤ 3: æ£€æŸ¥æ•ˆæœï¼Œæ»¡æ„åç”Ÿæˆé«˜è´¨é‡ç‰ˆæœ¬ (3-4åˆ†é’Ÿ)
bash run_configs/03_balanced.sh

# æ­¥éª¤ 4: æœ€ç»ˆäº¤ä»˜ç‰ˆæœ¬ (8-10åˆ†é’Ÿ)
bash run_configs/04_high_quality.sh

# æ­¥éª¤ 5: è¾“å‡ºæ–‡ä»¶ä½ç½®
ls -lh output_*.mp4
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

1. **å…ˆç”¨æé€Ÿæ¨¡å¼æµ‹è¯•å‚æ•°** (1åˆ†é’Ÿ)
2. **ç¡®è®¤æ•ˆæœååˆ‡æ¢åˆ°å¹³è¡¡æ¨¡å¼** (3-4åˆ†é’Ÿ)
3. **é‡è¦é¡¹ç›®ä½¿ç”¨é«˜è´¨é‡æ¨¡å¼** (8-10åˆ†é’Ÿ)
4. **æ‰¹é‡ç”Ÿäº§ä½¿ç”¨ ComfyUI ç­‰æ•ˆ** (1-2åˆ†é’Ÿ)

### âŒ ä¸æ¨èåšæ³•

1. ~~ç›´æ¥ç”¨é«˜è´¨é‡æ¨¡å¼æµ‹è¯•~~ (æµªè´¹æ—¶é—´)
2. ~~ä¸ä½¿ç”¨ LoRA åŠ é€Ÿ~~ (æ…¢ 10 å€)
3. ~~ä¸æ£€æŸ¥æ˜¾å­˜å°±ç”¨ 720P~~ (å®¹æ˜“ OOM)
4. ~~æ‰‹åŠ¨ä¿®æ”¹å‚æ•°ä½†ä¸å¤‡ä»½~~ (éš¾ä»¥å›é€€)

---

## ğŸ“ è·å–å¸®åŠ©

### é—®é¢˜åé¦ˆ:

- **GitHub Issues**: https://github.com/MeiGen-AI/InfiniteTalk/issues
- **è®ºæ–‡**: https://arxiv.org/abs/2508.14033
- **å®˜æ–¹æ–‡æ¡£**: https://meigen-ai.github.io/InfiniteTalk/

### å¸¸è§é—®é¢˜:

**Q: ä¸ºä»€ä¹ˆæˆ‘çš„é€Ÿåº¦æ¯”æ–‡æ¡£æ…¢?**
A: æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† LoRAã€æ­¥æ•°æ˜¯å¦ä¸º 4ã€æ˜¯å¦å¯ç”¨ fp8 é‡åŒ–

**Q: å¯ä»¥ç”¨ CPU è¿è¡Œå—?**
A: ä¸å»ºè®®ï¼Œé€Ÿåº¦ä¼šæ…¢ 100 å€ä»¥ä¸Š

**Q: æ”¯æŒ AMD æ˜¾å¡å—?**
A: ç†è®ºæ”¯æŒ ROCmï¼Œä½†æœªæµ‹è¯•

**Q: å¯ä»¥å•†ç”¨å—?**
A: éµå¾ª Apache 2.0 åè®®ï¼Œå¯å•†ç”¨

---

## ğŸ‰ æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰:

âœ… **6 ä¸ªä¼˜åŒ–é…ç½®** - æ¶µç›–æ‰€æœ‰ä½¿ç”¨åœºæ™¯
âœ… **å®Œæ•´æ–‡æ¡£** - ä»å…¥é—¨åˆ°ç²¾é€š
âœ… **å‚æ•°æ˜ å°„è¡¨** - ComfyUI â†” Python å®Œå…¨å¯¹ç…§
âœ… **äº¤äº’å¼èœå•** - ä¸€é”®å¯åŠ¨

**å¼€å§‹ä½¿ç”¨:**

```bash
cd /home/user/InfiniteTalk/run_configs
bash å¿«é€Ÿå¯åŠ¨.sh
```

ç¥ä½ ç”Ÿæˆé«˜è´¨é‡æ•°å­—äººè§†é¢‘! ğŸš€

---

**æ–‡æ¡£ç‰ˆæœ¬: v1.0**
**æœ€åæ›´æ–°: 2025-01-23**
**é€‚ç”¨äº: InfiniteTalk ä¸»åˆ†æ”¯**
